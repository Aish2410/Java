{"ast":null,"code":"import * as dayjs from 'dayjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/alert.service\";\nimport * as i2 from \"src/app/services/course.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction CoursesComponent_tr_56_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"td\")(17, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function CoursesComponent_tr_56_Template_button_click_17_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const course_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.deleteCourse(course_r2.courseId));\n    });\n    i0.ɵɵtext(18, \"Delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"button\", 33);\n    i0.ɵɵlistener(\"click\", function CoursesComponent_tr_56_Template_button_click_19_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const course_r2 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.openPopup(course_r2));\n    });\n    i0.ɵɵtext(20, \"View\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const course_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(course_r2 == null ? null : course_r2.courseId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(course_r2 == null ? null : course_r2.couresName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(7, 6, course_r2 == null ? null : course_r2.couresStartDate));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(10, 8, course_r2 == null ? null : course_r2.couresEndDate));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(course_r2 == null ? null : course_r2.couresDuration);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(15, 10, course_r2 == null ? null : course_r2.couresFees, \"INR\", \"symbol\"));\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"display\": a0\n  };\n};\nexport class CoursesComponent {\n  constructor(alert, courses) {\n    this.alert = alert;\n    this.courses = courses;\n    this.courseList = [];\n    this.displayStyle = \"none\";\n    this.selectedCourse = {\n      active: false,\n      couresDuration: '',\n      couresEndDate: '',\n      couresFees: '',\n      couresName: '',\n      couresStartDate: '',\n      courseId: 0\n    };\n  }\n  ngOnInit() {\n    this.courses.getAll().subscribe(res => {\n      this.courseList = res.response || [];\n    }, this.alert.apiFail);\n  }\n  onSubmit(ngForm) {\n    if (ngForm.form.invalid) {\n      this.alert.error(\"Please fill required elements\");\n      return;\n    }\n    const credentials = ngForm.form.value;\n    // this.auth.register(credentials);\n    console.log('credentials', credentials);\n    credentials.couresDuration = this.getDifferenceDate(credentials.couresStartDate, credentials.couresEndDate);\n    credentials.active = true;\n    credentials.courseId = 0;\n    this.courses.add(credentials).subscribe(res => {\n      this.alert.apiSuccess(res);\n      this.ngOnInit();\n    }, this.alert.apiFail);\n    ngForm.resetForm();\n  }\n  getDifferenceDate(cureDate, newDate) {\n    const day1 = dayjs(cureDate);\n    const day2 = dayjs(newDate);\n    const x = day2.diff(day1, 'M', true);\n    return parseFloat(x.toString()).toFixed(2);\n  }\n  deleteCourse(courseId) {\n    this.courses.delete(courseId).subscribe(res => {\n      this.alert.apiSuccess(res);\n      this.ngOnInit();\n    }, this.alert.apiFail);\n  }\n  openPopup(selCourse) {\n    this.selectedCourse = {\n      ...selCourse\n    };\n    this.displayStyle = \"block\";\n  }\n  closePopup() {\n    this.displayStyle = \"none\";\n  }\n  onUpdate() {\n    this.selectedCourse.couresDuration = this.getDifferenceDate(this.selectedCourse.couresStartDate, this.selectedCourse.couresEndDate);\n    this.courses.update(this.selectedCourse).subscribe(res => {\n      this.closePopup();\n      this.alert.apiSuccess(res);\n      this.ngOnInit();\n    }, this.alert.apiFail);\n  }\n}\nCoursesComponent.ɵfac = function CoursesComponent_Factory(t) {\n  return new (t || CoursesComponent)(i0.ɵɵdirectiveInject(i1.AlertService), i0.ɵɵdirectiveInject(i2.CourseService));\n};\nCoursesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CoursesComponent,\n  selectors: [[\"app-courses\"]],\n  decls: 96,\n  vars: 10,\n  consts: [[1, \"container\", \"courses_page\"], [1, \"row\"], [1, \"col-md-4\", \"offset-md-4\"], [1, \"card\"], [3, \"ngSubmit\"], [\"registerForm\", \"ngForm\"], [1, \"col-12\", \"mt-3\"], [1, \"form-group\"], [\"type\", \"text\", \"ngModel\", \"\", \"name\", \"couresName\", \"required\", \"\", 1, \"form-control\"], [\"type\", \"number\", \"ngModel\", \"\", \"name\", \"couresFees\", \"required\", \"\", 1, \"form-control\"], [\"type\", \"date\", \"ngModel\", \"\", \"name\", \"couresStartDate\", \"required\", \"\", 1, \"form-control\"], [\"type\", \"date\", \"ngModel\", \"\", \"name\", \"couresEndDate\", \"required\", \"\", 1, \"form-control\"], [\"type\", \"text\", \"readonly\", \"\", 1, \"form-control\", 3, \"value\"], [\"type\", \"submit\", 1, \"btn\", \"btn-outline-primary\", \"mt-3\"], [1, \"row\", \"mt-4\"], [1, \"col-12\", \"card\"], [1, \"table\", \"table-bordered\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [\"tabindex\", \"-1\", \"role\", \"dialog\", 1, \"modal\", 3, \"ngStyle\"], [\"role\", \"document\", 1, \"modal-dialog\", \"modal-dialog-centered\"], [1, \"modal-content\"], [1, \"modal-header\"], [1, \"modal-title\"], [1, \"modal-body\"], [3, \"submit\"], [\"type\", \"text\", \"name\", \"couresName\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"number\", \"name\", \"couresFees\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"date\", \"name\", \"couresStartDate\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"date\", \"name\", \"couresEndDate\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"modal-footer\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\", 3, \"click\"], [1, \"btn\", \"btn-outline-danger\", \"me-2\", 3, \"click\"], [1, \"btn\", \"btn-outline-success\", 3, \"click\"]],\n  template: function CoursesComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r6 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"h1\");\n      i0.ɵɵtext(5, \"Register new courses\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"form\", 4, 5);\n      i0.ɵɵlistener(\"ngSubmit\", function CoursesComponent_Template_form_ngSubmit_6_listener() {\n        i0.ɵɵrestoreView(_r6);\n        const _r0 = i0.ɵɵreference(7);\n        return i0.ɵɵresetView(ctx.onSubmit(_r0));\n      });\n      i0.ɵɵelementStart(8, \"div\", 1)(9, \"div\", 6)(10, \"div\", 7)(11, \"label\");\n      i0.ɵɵtext(12, \"Course Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(13, \"input\", 8);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(14, \"div\", 6)(15, \"div\", 7)(16, \"label\");\n      i0.ɵɵtext(17, \"Course Fee\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(18, \"input\", 9);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(19, \"div\", 6)(20, \"div\", 7)(21, \"label\");\n      i0.ɵɵtext(22, \"Course Start Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(23, \"input\", 10);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(24, \"div\", 6)(25, \"div\", 7)(26, \"label\");\n      i0.ɵɵtext(27, \"Course End Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(28, \"input\", 11);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(29, \"div\", 6)(30, \"div\", 7)(31, \"label\");\n      i0.ɵɵtext(32, \"Course Duration (In Month)\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(33, \"input\", 12);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(34, \"button\", 13);\n      i0.ɵɵtext(35, \"Submit\");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(36, \"div\", 14)(37, \"div\", 15)(38, \"table\", 16)(39, \"thead\")(40, \"tr\")(41, \"th\", 17);\n      i0.ɵɵtext(42, \"ID\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(43, \"th\", 17);\n      i0.ɵɵtext(44, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(45, \"th\", 17);\n      i0.ɵɵtext(46, \"Start Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(47, \"th\", 17);\n      i0.ɵɵtext(48, \"End Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(49, \"th\", 17);\n      i0.ɵɵtext(50, \"Duration (Month)\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(51, \"th\", 17);\n      i0.ɵɵtext(52, \"Fees\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(53, \"th\", 17);\n      i0.ɵɵtext(54, \"Action\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(55, \"tbody\");\n      i0.ɵɵtemplate(56, CoursesComponent_tr_56_Template, 21, 14, \"tr\", 18);\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(57, \"div\", 19)(58, \"div\", 20)(59, \"div\", 21)(60, \"div\", 22)(61, \"h4\", 23);\n      i0.ɵɵtext(62, \"Course Details \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(63, \"div\", 24)(64, \"form\", 25);\n      i0.ɵɵlistener(\"submit\", function CoursesComponent_Template_form_submit_64_listener() {\n        return ctx.onUpdate();\n      });\n      i0.ɵɵelementStart(65, \"div\", 1)(66, \"div\", 6)(67, \"div\", 7)(68, \"label\");\n      i0.ɵɵtext(69, \"Course Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(70, \"input\", 26);\n      i0.ɵɵlistener(\"ngModelChange\", function CoursesComponent_Template_input_ngModelChange_70_listener($event) {\n        return ctx.selectedCourse.couresName = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(71, \"div\", 6)(72, \"div\", 7)(73, \"label\");\n      i0.ɵɵtext(74, \"Course Fee\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(75, \"input\", 27);\n      i0.ɵɵlistener(\"ngModelChange\", function CoursesComponent_Template_input_ngModelChange_75_listener($event) {\n        return ctx.selectedCourse.couresFees = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(76, \"div\", 6)(77, \"div\", 7)(78, \"label\");\n      i0.ɵɵtext(79, \"Course Start Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(80, \"input\", 28);\n      i0.ɵɵlistener(\"ngModelChange\", function CoursesComponent_Template_input_ngModelChange_80_listener($event) {\n        return ctx.selectedCourse.couresStartDate = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(81, \"div\", 6)(82, \"div\", 7)(83, \"label\");\n      i0.ɵɵtext(84, \"Course End Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(85, \"input\", 29);\n      i0.ɵɵlistener(\"ngModelChange\", function CoursesComponent_Template_input_ngModelChange_85_listener($event) {\n        return ctx.selectedCourse.couresEndDate = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(86, \"div\", 6)(87, \"div\", 7)(88, \"label\");\n      i0.ɵɵtext(89, \"Course Duration (In Month)\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(90, \"input\", 12);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(91, \"button\", 13);\n      i0.ɵɵtext(92, \"Update\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(93, \"div\", 30)(94, \"button\", 31);\n      i0.ɵɵlistener(\"click\", function CoursesComponent_Template_button_click_94_listener() {\n        return ctx.closePopup();\n      });\n      i0.ɵɵtext(95, \" Close \");\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(7);\n      i0.ɵɵadvance(33);\n      i0.ɵɵproperty(\"value\", ctx.getDifferenceDate(_r0.form.value.couresStartDate, _r0.form.value.couresEndDate));\n      i0.ɵɵadvance(23);\n      i0.ɵɵproperty(\"ngForOf\", ctx.courseList);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(8, _c0, ctx.displayStyle));\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"ngModel\", ctx.selectedCourse.couresName);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.selectedCourse.couresFees);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.selectedCourse.couresStartDate);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.selectedCourse.couresEndDate);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"value\", ctx.getDifferenceDate(ctx.selectedCourse.couresStartDate, ctx.selectedCourse.couresEndDate));\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgStyle, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm, i3.CurrencyPipe, i3.DatePipe],\n  styles: [\".courses_page[_ngcontent-%COMP%] {\\n  padding-top: 20px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvYWRtaW4vY291cnNlcy9jb3Vyc2VzLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksaUJBQUE7QUFDSiIsInNvdXJjZXNDb250ZW50IjpbIi5jb3Vyc2VzX3BhZ2V7XG4gICAgcGFkZGluZy10b3A6IDIwcHg7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["dayjs","i0","CoursesComponent","constructor","alert","courses","active","couresDuration","couresEndDate","couresFees","couresName","couresStartDate","courseId","ngOnInit","getAll","subscribe","res","courseList","response","apiFail","onSubmit","ngForm","form","invalid","error","credentials","value","console","log","getDifferenceDate","add","apiSuccess","resetForm","cureDate","newDate","day1","day2","x","diff","parseFloat","toString","toFixed","deleteCourse","delete","openPopup","selCourse","selectedCourse","displayStyle","closePopup","onUpdate","update","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Dell\\university_project\\src\\app\\pages\\admin\\courses\\courses.component.ts","C:\\Users\\Dell\\university_project\\src\\app\\pages\\admin\\courses\\courses.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport * as dayjs from 'dayjs';\nimport { CourseDTO } from 'src/app/interfaces';\nimport { AlertService } from 'src/app/services/alert.service';\nimport { CourseService } from 'src/app/services/course.service';\n\n@Component({\n  selector: 'app-courses',\n  templateUrl: './courses.component.html',\n  styleUrls: ['./courses.component.scss']\n})\nexport class CoursesComponent {\n  public courseList: CourseDTO[] = [];\n\n  displayStyle = \"none\";\n\n  public selectedCourse: CourseDTO = {\n    active: false,\n    couresDuration: '',\n    couresEndDate: '',\n    couresFees: '',\n    couresName: '',\n    couresStartDate: '',\n    courseId: 0\n  }\n\n\n  constructor(private alert: AlertService, private courses: CourseService) { }\n\n\n  ngOnInit() {\n    this.courses.getAll().subscribe((res: any) => {\n      this.courseList = res.response || [];\n    }, this.alert.apiFail);\n  }\n\n  onSubmit(ngForm: NgForm) {\n    if (ngForm.form.invalid) {\n      this.alert.error(\"Please fill required elements\");\n      return;\n    }\n\n    const credentials: CourseDTO = ngForm.form.value;\n    // this.auth.register(credentials);\n    console.log('credentials', credentials);\n    credentials.couresDuration = this.getDifferenceDate(credentials.couresStartDate, credentials.couresEndDate);\n    credentials.active = true;\n    credentials.courseId = 0;\n    this.courses.add(credentials).subscribe((res: any) => {\n      this.alert.apiSuccess(res);\n      this.ngOnInit();\n    }, this.alert.apiFail);\n    ngForm.resetForm();\n\n  }\n\n  getDifferenceDate(cureDate: any, newDate: any) {\n    const day1 = dayjs(cureDate);\n    const day2 = dayjs(newDate);\n    const x = day2.diff(day1, 'M', true);\n    return parseFloat(x.toString()).toFixed(2);\n  }\n\n  deleteCourse(courseId: number) {\n    this.courses.delete(courseId).subscribe((res: any) => {\n      this.alert.apiSuccess(res);\n      this.ngOnInit();\n    }, this.alert.apiFail);\n  }\n\n  openPopup(selCourse: CourseDTO) {\n    this.selectedCourse = { ...selCourse };\n    this.displayStyle = \"block\";\n  }\n  closePopup() {\n    this.displayStyle = \"none\";\n  }\n\n  onUpdate() {\n\n    this.selectedCourse.couresDuration = this.getDifferenceDate(this.selectedCourse.couresStartDate, this.selectedCourse.couresEndDate);\n    this.courses.update(this.selectedCourse).subscribe((res: any) => {\n      this.closePopup();\n      this.alert.apiSuccess(res);\n      this.ngOnInit();\n    }, this.alert.apiFail);\n  }\n\n}\n","<div class=\"container courses_page\">\n    <div class=\"row\">\n        <div class=\"col-md-4 offset-md-4\">\n            <div class=\"card\">\n                <h1>Register new courses</h1>\n                <form #registerForm=\"ngForm\" (ngSubmit)=\"onSubmit(registerForm)\">\n    \n                    <div class=\"row\">\n                        <div class=\"col-12 mt-3\">\n                            <div class=\"form-group\">\n                                <label >Course Name</label>\n                                <input type=\"text\" class=\"form-control\" ngModel name=\"couresName\"\n                                     required >\n                            </div>\n                        </div>\n                        <div class=\"col-12 mt-3\">\n                            <div class=\"form-group\">\n                                <label>Course Fee</label>\n                                <input type=\"number\" class=\"form-control\" ngModel name=\"couresFees\" required>\n                            </div>\n                        </div>\n                        <div class=\"col-12 mt-3\">\n                            <div class=\"form-group\">\n                                <label>Course Start Date</label>\n                                <input type=\"date\" class=\"form-control\" ngModel name=\"couresStartDate\" required>\n                            </div>\n                        </div>\n                        <div class=\"col-12 mt-3\">\n                            <div class=\"form-group\">\n                                <label>Course End Date</label>\n                                <input type=\"date\" class=\"form-control\" ngModel name=\"couresEndDate\" required>\n                            </div>\n                        </div>\n\n\n                        <div class=\"col-12 mt-3\">\n                            <div class=\"form-group\">\n                                <label>Course Duration (In Month)</label>\n                                <input type=\"text\" class=\"form-control\"  readonly [value]=\"getDifferenceDate(registerForm.form.value.couresStartDate,registerForm.form.value.couresEndDate)\" >\n                            </div>\n                        </div>\n\n                        \n                        \n    \n                        \n    \n                        \n                    </div>\n    \n                    <button type=\"submit\" class=\"btn btn-outline-primary mt-3\">Submit</button>\n                </form>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"row mt-4\">\n        <div class=\"col-12 card\">\n\n            <table class=\"table table-bordered\">\n                <thead>\n                    <tr>\n                        <th scope=\"col\">ID</th>\n                        <th scope=\"col\">Name</th>\n                        <th scope=\"col\">Start Date</th>\n                        <th scope=\"col\">End Date</th>\n                        <th scope=\"col\">Duration (Month)</th>\n                        <th scope=\"col\">Fees</th>\n                        <th scope=\"col\">Action</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr *ngFor=\"let course of courseList\">\n                        <td>{{course?.courseId }}</td>\n                        <td>{{course?.couresName}}</td>\n                        <td>{{course?.couresStartDate | date}}</td>\n                        <td>{{course?.couresEndDate | date}}</td>\n                        <td>{{course?.couresDuration}}</td>\n                        <td>{{course?.couresFees | currency:\"INR\":\"symbol\"}}</td>\n                        <td>\n                            <button class=\"btn btn-outline-danger me-2\" (click)=\"deleteCourse(course.courseId)\" >Delete</button>\n                            <button class=\"btn btn-outline-success\" (click)=\"openPopup(course)\">View</button>\n                           \n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n\n<div class=\"modal \" tabindex=\"-1\" role=\"dialog\" [ngStyle]=\"{'display':displayStyle}\">\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <h4 class=\"modal-title\">Course Details </h4>\n            </div>\n            <div class=\"modal-body\">\n                <form (submit)=\"onUpdate()\">\n                \n                    <div class=\"row\">\n                        <div class=\"col-12 mt-3\">\n                            <div class=\"form-group\">\n                                <label>Course Name</label>\n                                <input type=\"text\" class=\"form-control\"  [(ngModel)]=\"selectedCourse.couresName\" name=\"couresName\" required>\n                            </div>\n                        </div>\n                        <div class=\"col-12 mt-3\">\n                            <div class=\"form-group\">\n                                <label>Course Fee</label>\n                                <input type=\"number\" class=\"form-control\" [(ngModel)]=\"selectedCourse.couresFees\" name=\"couresFees\" required>\n                            </div>\n                        </div>\n                        <div class=\"col-12 mt-3\">\n                            <div class=\"form-group\">\n                                <label>Course Start Date</label>\n                                <input type=\"date\" class=\"form-control\" [(ngModel)]=\"selectedCourse.couresStartDate\" name=\"couresStartDate\" required>\n                            </div>\n                        </div>\n                        <div class=\"col-12 mt-3\">\n                            <div class=\"form-group\">\n                                <label>Course End Date</label>\n                                <input type=\"date\" class=\"form-control\" [(ngModel)]=\"selectedCourse.couresEndDate\" name=\"couresEndDate\" required>\n                            </div>\n                        </div>\n                \n                \n                        <div class=\"col-12 mt-3\">\n                            <div class=\"form-group\">\n                                <label>Course Duration (In Month)</label>\n                                <input type=\"text\" class=\"form-control\" readonly\n                                    [value]=\"getDifferenceDate(selectedCourse.couresStartDate,selectedCourse.couresEndDate)\">\n                            </div>\n                        </div>\n                \n                    </div>\n                \n                    <button type=\"submit\" class=\"btn btn-outline-primary mt-3\">Update</button>\n                </form>\n\n            </div>\n            <div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-danger\" (click)=\"closePopup()\">\n                    Close\n                </button>\n            </div>\n        </div>\n    </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}